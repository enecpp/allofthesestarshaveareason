namespace allofthesestarshaveareason.Services.Interfaces;

/// <summary>
/// İşlem durumu yönetimi için repository arayüzü
/// </summary>
public interface IJobRepository
{
    /// <summary>
    /// Yeni bir iş oluşturur
    /// </summary>
    Task<string> CreateJobAsync(CancellationToken cancellationToken = default);
    
    /// <summary>
    /// İş durumunu günceller
    /// </summary>
    Task UpdateJobStatusAsync(string jobId, string status, int progress, CancellationToken cancellationToken = default);
    
    /// <summary>
    /// İş durumunu getirir
    /// </summary>
    Task<AnalysisStatus?> GetJobStatusAsync(string jobId, CancellationToken cancellationToken = default);
    
    /// <summary>
    /// İşi tamamlanmış olarak işaretler
    /// </summary>
    Task CompleteJobAsync(string jobId, int? resultId, CancellationToken cancellationToken = default);
    
    /// <summary>
    /// İşi hata ile işaretler
    /// </summary>
    Task FailJobAsync(string jobId, string errorMessage, CancellationToken cancellationToken = default);
    
    /// <summary>
    /// İş sonuçlarını kaydeder
    /// </summary>
    Task SaveJobResultsAsync(string jobId, object results, CancellationToken cancellationToken = default);
}
